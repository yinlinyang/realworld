(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{181:function(t,e,n){"use strict";n.d(e,"f",(function(){return l})),n.d(e,"e",(function(){return m})),n.d(e,"b",(function(){return d})),n.d(e,"i",(function(){return f})),n.d(e,"h",(function(){return v})),n.d(e,"d",(function(){return h})),n.d(e,"j",(function(){return O})),n.d(e,"g",(function(){return j})),n.d(e,"a",(function(){return _})),n.d(e,"c",(function(){return C}));var r=n(58),c="/api/articles",o="/api/articles/feed",l=function(data){return Object(r.b)({method:"get",url:c,params:data})},m=function(t){return Object(r.b)({method:"get",url:"".concat(c,"/").concat(t)})},d=function(data){return Object(r.b)({method:"post",url:c,data:data})},f=function(t,data){return Object(r.b)({method:"put",url:"".concat(c,"/").concat(t),data:data})},v=function(data){return Object(r.b)({method:"get",url:o,params:data})},h=function(t){return Object(r.b)({method:"post",url:"".concat(c,"/").concat(t,"/favorite")})},O=function(t){return Object(r.b)({method:"delete",url:"".concat(c,"/").concat(t,"/favorite")})},j=function(t){return Object(r.b)({method:"get",url:"".concat(c,"/").concat(t,"/comments")})},_=function(t,data){return Object(r.b)({method:"post",url:"".concat(c,"/").concat(t,"/comments"),data:data})},C=function(t,e){return Object(r.b)({method:"delete",url:"".concat(c,"/").concat(t,"/comments/").concat(e)})}},182:function(t,e,n){"use strict";n.d(e,"d",(function(){return d})),n.d(e,"e",(function(){return f})),n.d(e,"c",(function(){return v})),n.d(e,"g",(function(){return h})),n.d(e,"b",(function(){return O})),n.d(e,"a",(function(){return j})),n.d(e,"f",(function(){return _}));var r=n(58),c="/api/users/login",o="/api/users",l="/api/user",m="api/profiles",d=function(data){return Object(r.b)({method:"post",url:c,data:data})},f=function(data){return Object(r.b)({method:"post",url:o,data:data})},v=function(){return Object(r.b)({method:"get",url:l})},h=function(data){return Object(r.b)({method:"put",url:l,data:data})},O=function(t){return Object(r.b)({method:"get",url:"".concat(m,"/").concat(t)})},j=function(t){return Object(r.b)({method:"post",url:"".concat(m,"/").concat(t,"/follow")})},_=function(t){return Object(r.b)({method:"delete",url:"".concat(m,"/").concat(t,"/follow")})}},258:function(t,e,n){"use strict";n.r(e);n(75),n(31),n(59),n(30),n(13),n(43);var r=n(41),c=(n(29),n(3)),o=n(44),l=n(181),m=n(182),d={name:"ArticleMeta",props:{article:{type:Object,default:{}}},data:function(){return{followLoading:!1,changFavoriteStatusIng:!1}},methods:{handleFollowChange:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n,r,c,o,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.article.author,r=n.following,c=n.username,t.followLoading=!0,e.prev=2,!r){e.next=9;break}return e.next=6,Object(m.f)(c);case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,Object(m.a)(c);case 11:e.t0=e.sent;case 12:o=e.t0,data=o.data,Object.assign(t.article.author,data.profile),e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),console.log(e.t1);case 20:t.followLoading=!1;case 21:case"end":return e.stop()}}),e,null,[[2,17]])})))()},handleFavoriteChange:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var article,n,r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(article=t.article,e.prev=1,!t.changFavoriteStatusIng){e.next=4;break}return e.abrupt("return");case 4:return t.changFavoriteStatusIng=!0,n=article.slug,r=article.favorited?l.j:l.d,e.next=9,r(n);case 9:c=e.sent,Object.assign(article,c.data.article),t.changFavoriteStatusIng=!1,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})))()}}},f=n(20),v=Object(f.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article-meta"},[n("nuxt-link",{attrs:{to:{name:"profile",params:{username:t.article.author.username}}}},[n("img",{attrs:{src:t.article.author.image}})]),t._v(" "),n("div",{staticClass:"info"},[n("nuxt-link",{staticClass:"author",attrs:{to:{name:"profile",params:{username:t.article.author.username}}}},[t._v("\n      "+t._s(t.article.author.username)+"\n    ")]),t._v(" "),n("span",{staticClass:"date"},[t._v(t._s(t._f("date")(t.article.createdAt,"MMMM DD, YYYY")))])],1),t._v(" "),n("button",{staticClass:"btn btn-sm",class:{"btn-outline-secondary":t.article.author.following},attrs:{disabled:t.followLoading},on:{click:t.handleFollowChange}},[n("i",{staticClass:"ion-plus-round"}),t._v("\n      "+t._s(t.article.author.following?"UnFollow":"Follow")+"\n    "+t._s(t.article.author.username)+"\n  ")]),t._v("\n    \n  "),n("button",{staticClass:"btn btn-sm",class:{"btn-outline-primary":t.article.favorited},attrs:{disabled:t.changFavoriteStatusIng},on:{click:t.handleFavoriteChange}},[n("i",{staticClass:"ion-heart"}),t._v("\n      Favorite "+t._s(t.article.author.username)+"\n    "),n("span",{staticClass:"counter"},[t._v("("+t._s(t.article.favoritesCount)+")")])])],1)}),[],!1,null,null,null).exports,h=n(32),O=n(201),j=n.n(O);function _(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var C={name:"ArticleIndex",components:{ArticleMeta:v},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(h.c)(["user"])),data:function(){return{content:""}},asyncData:function(t){return Object(c.a)(regeneratorRuntime.mark((function e(){var n,c,o,m,d,f,article,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.params,c=n.slug,e.prev=2,e.next=5,Promise.all([Object(l.e)(c),Object(l.g)(c)]);case 5:return o=e.sent,m=Object(r.a)(o,2),d=m[0],f=m[1],article=d.data.article,v=new j.a,article.body=v.render(article.body),e.abrupt("return",{article:d.data.article,comments:f.data.comments});case 15:e.prev=15,e.t0=e.catch(2),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[2,15]])})))()},methods:{handleSubmit:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n,r,content;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.$route.params,r=n.slug,content=t.content,e.next=6,Object(l.a)(r,{comment:{body:content}});case 6:t.content="",t.getComment(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},getComment:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n,r,c,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.$route.params,r=n.slug,e.next=5,Object(l.g)(r);case 5:c=e.sent,data=c.data,t.comments=data.comments,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},handleDeleteComment:function(t){var e=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var r,c,o,data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r=t.id,c=e.$route.params.slug,n.next=5,Object(l.c)(c,r);case 5:return n.next=7,Object(l.g)(c);case 7:o=n.sent,data=o.data,e.comments=data.comments,n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),console.log(n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,12]])})))()}}},w=Object(f.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article-page"},[n("div",{staticClass:"banner"},[n("div",{staticClass:"container"},[n("h1",[t._v(t._s(t.article.title))]),t._v(" "),n("ArticleMeta",{attrs:{article:t.article}})],1)]),t._v(" "),n("div",{staticClass:"container page"},[n("div",{staticClass:"row article-content"},[n("div",{staticClass:"col-md-12",domProps:{innerHTML:t._s(t.article.body)}})]),t._v(" "),n("hr"),t._v(" "),n("div",{staticClass:"article-actions"},[n("ArticleMeta",{attrs:{article:t.article}})],1),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-xs-12 col-md-8 offset-md-2"},[n("form",{staticClass:"card comment-form",on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[n("div",{staticClass:"card-block"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"form-control",attrs:{placeholder:"Write a comment...",rows:"3"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"card-footer"},[n("img",{staticClass:"comment-author-img",attrs:{src:t.user.image}}),t._v(" "),n("button",{staticClass:"btn btn-sm btn-primary"},[t._v("Post Comment")])])]),t._v(" "),t._l(t.comments,(function(e){return n("div",{key:e.id,staticClass:"card"},[n("div",{staticClass:"card-block"},[n("p",{staticClass:"card-text"},[t._v("\n              "+t._s(e.body)+"\n            ")])]),t._v(" "),n("div",{staticClass:"card-footer"},[n("nuxt-link",{staticClass:"comment-author",attrs:{to:{name:"profile",params:{username:e.author.username}}}},[n("img",{staticClass:"comment-author-img",attrs:{src:e.author.image}})]),t._v("\n             \n            "),n("nuxt-link",{staticClass:"comment-author",attrs:{to:{name:"profile",params:{username:e.author.username}}}},[t._v(t._s(e.author.username))]),t._v(" "),n("span",{staticClass:"date-posted"},[t._v(t._s(t._f("date")(e.createdAt,"MMMM DD, YYYY")))]),t._v(" "),t.user.username===e.author.username?n("span",{staticClass:"mod-options"},[n("i",{staticClass:"ion-trash-a",on:{click:function(n){return t.handleDeleteComment(e)}}})]):t._e()],1)])}))],2)])])])}),[],!1,null,null,null);e.default=w.exports}}]);